{% extends "NavBar.html" %}
{% block content %}
{% load static %}
    {% load mathfilters %}

  <link rel="stylesheet" type="text/css" href="{% static 'grading_code/css/informmation.css' %}">

  <!-- input assignment -->
  <div id="main">
    <div class="center">
      <h2>Information</h2>
    </div>

    <div class="back">
      <table id="customers">
        {% if request.user.is_admin %}
        <form action="{% url 'Class_Management:StudentInfo' request.session.classroom %}" method="POST">
          {% csrf_token %}
        <input id="submit_csv" type="submit" name="csv" value="Export" />
          <input id="submit_moss" type="submit" name="moss" value="MOSS" />
          </form>
        {% endif %}
        <tr>
          <th>Student ID</th>
          <th>Name</th>
            <th>Email</th>
          <th>Progress</th>
        </tr>
        {% for i in User_objects %}
        <tr>
          <td>
            <a href='{% url 'Class_Management:StudentScoreInfo' request.session.classroom i.username %}'>{{ i.studentId }}</a>
          </td>
          <td>{{ i.first_name }} {{ i.last_name }}</td>
            <td>{{ i.email }}</td>
          <td>
            <div class="container">
                <div id={{ i.username }}progress>
                    <div id={{ i.username }}percent><center>{{ i.quiztracker_set.all.0.quizDoneCount|div:quiz_count|mul:100 }} %</center></div>
                </div>
            </div>
          </td>
        </tr>
                      <script>
                      var x = {{ i.quiztracker_set.all.0.quizDoneCount|div:quiz_count|mul:100 }}
        function change_qp_classname() {
            if (x >= 80 && x <= 100){
                document.getElementById("{{ i.username }}progress").className = "skills html";
            }
            else if (x >= 50 && x < 80){
                document.getElementById("{{ i.username }}progress").className = "skills css";
            }
            else if (x >= 10 && x < 50){
                document.getElementById("{{ i.username }}progress").className = "skills js";
            }
            else if (x >= 0 && x < 10){
                document.getElementById("{{ i.username }}progress").className = "skills php";
            }
        };
        change_qp_classname();
        document.getElementById("{{ i.username }}progress").style.width = x.toFixed([0])+'%';
        document.getElementById("{{ i.username }}percent").innerHTML = x.toFixed([0])+' %';
    </script>
          {% endfor %}
      </table>
    </div>
  </div>
    {% endblock %}}